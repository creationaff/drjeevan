<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dr Jeevan ‚Äî Neurologist, Ayurvedic Doctor & Osteopath</title>
  <meta name="description" content="Consultations with Dr Jeevan, a neurologist, ayurvedic doctor, and osteopath. Book or send a message on Instagram.">
  <meta property="og:title" content="Dr Jeevan ‚Äî Neurologist, Ayurvedic Doctor & Osteopath">
  <meta property="og:description" content="Consultations with Dr Jeevan. Message on Instagram to enquire or book.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://drjeevan.example/">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M40 10 h20 v30 h30 v20 h-30 v30 h-20 v-30 h-30 v-20 h30 z' fill='%23d32f2f'/></svg>">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <div class="brand"><span class="brand-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M40 10 h20 v30 h30 v20 h-30 v30 h-20 v-30 h-30 v-20 h30 z" fill="#d32f2f"/></svg></span>Dr Jeevan</div>
      <nav class="nav">
        <a href="#booking">Book Now</a>
        <a href="#treatments">Treatments</a>
        <a href="#services">Services</a>
        <a href="#instagram-live">Live Sessions</a>
        <a href="#about">About</a>
        <a id="ig-top" class="button small" href="https://ig.me/m/ayurvedadrjeevan" rel="noopener" target="_blank">Instagram</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero-grid">
        <div class="hero-text">
          <h1>Dr Jeevan Neurologist, Ayurveda & Osteopathy</h1>
          <p class="subtitle">Holistic, evidence-informed care for nervous system health, pain, and mobility.</p>
          <div class="cta-row">
            <button class="button primary" onclick="bookConsultation('General Consultation', '$120')">Book Consultation</button>
            <a id="ig-cta" class="button ghost" href="https://ig.me/m/ayurvedadrjeevan" target="_blank" rel="noopener">Message on Instagram</a>
          </div>
          <p class="note">Prefer Instagram DMs for the fastest response.</p>
        </div>
        <div class="hero-card">
          <div class="card">
            <h3>New Patients</h3>
            <ul>
              <li>Neurology consultations</li>
              <li>Ayurvedic diagnostics & lifestyle</li>
              <li>Osteopathic manual therapy</li>
            </ul>
            <p class="muted">Appointments available by request. Send a DM to enquire.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="services" class="section">
      <div class="container">
        <h2>Services</h2>
        <div class="cards">
          <div class="card">
            <h3>Neurology</h3>
            <p>Headaches & migraines ‚Ä¢ neuropathies ‚Ä¢ balance ‚Ä¢ sleep ‚Ä¢ step‚Äëby‚Äëstep plans.</p>
          </div>
          <div class="card">
            <h3>Ayurveda</h3>
            <p>Constitution‚Äëbased diet, herbs, and daily routines; traditional therapies when indicated.</p>
          </div>
          <div class="card">
            <h3>Osteopathy</h3>
            <p>Gentle hands‚Äëon techniques to restore motion, reduce pain, and improve function.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="ayurveda" class="section alt">
      <div class="container">
        <h2>Ayurvedic Approach</h2>
        <div class="cards">
          <div class="card">
            <h3>üåø Herbs</h3>
            <p>Thoughtful use of botanicals to support digestion, sleep, and nervous system balance.</p>
          </div>
          <div class="card">
            <h3>üßò Lifestyle</h3>
            <p>Daily routines (dinacharya), breathwork, and movement tailored to your constitution.</p>
          </div>
          <div class="card">
            <h3>ü•ó Nutrition</h3>
            <p>Simple, seasonal food guidance to improve energy, clarity, and recovery.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="treatments" class="section">
      <div class="container">
        <h2>Treatments</h2>
        <div id="treatments-grid" class="treatments-grid"></div>
      </div>
    </section>

    <section id="booking" class="section booking-section">
      <div class="container">
        <h2>Book Your Consultation</h2>
        <p class="booking-subtitle">Select a date and time slot for your personalized consultation with Dr Jeevan</p>
        
        <div class="booking-container">
          <div class="calendar-container">
            <div class="calendar-header">
              <button id="prev-month" class="calendar-nav">&lt;</button>
              <h3 id="calendar-month-year"></h3>
              <button id="next-month" class="calendar-nav">&gt;</button>
            </div>
            <div class="calendar-grid">
              <div class="calendar-day-header">Sun</div>
              <div class="calendar-day-header">Mon</div>
              <div class="calendar-day-header">Tue</div>
              <div class="calendar-day-header">Wed</div>
              <div class="calendar-day-header">Thu</div>
              <div class="calendar-day-header">Fri</div>
              <div class="calendar-day-header">Sat</div>
              <div id="calendar-days"></div>
            </div>
          </div>
          
          <div class="time-slots-container">
            <h4>Available Time Slots</h4>
            <p class="selected-date">Please select a date first</p>
            <div id="time-slots" class="time-slots"></div>
          </div>
        </div>
        
        <div id="booking-form-container" class="booking-form-container" style="display: none;">
          <div class="booking-form-card">
            <h4>Booking Details</h4>
            <form id="booking-form">
              <div class="form-group">
                <label for="patient-name">Full Name *</label>
                <input type="text" id="patient-name" name="name" required>
              </div>
              
              <div class="form-group">
                <label for="patient-email">Email *</label>
                <input type="email" id="patient-email" name="email" required>
              </div>
              
              <div class="form-group">
                <label for="patient-phone">Phone Number *</label>
                <div class="phone-input">
                  <select id="phone-country" name="phoneCountry" class="phone-code" required>
                    <option value="+62" selected>+62 Indonesia (Bali)</option>
                    <option value="+61">+61 Australia</option>
                    <option value="+65">+65 Singapore</option>
                    <option value="+60">+60 Malaysia</option>
                    <option value="+91">+91 India</option>
                    <option value="+44">+44 United Kingdom</option>
                    <option value="+1">+1 United States/Canada</option>
                    <option value="+971">+971 United Arab Emirates</option>
                  </select>
                  <input type="tel" id="patient-phone" name="phone" class="phone-number" inputmode="tel" autocomplete="tel" placeholder="Phone number" required>
                </div>
              </div>
              
              <div class="form-group">
                <label for="consultation-type">Service Type *</label>
                <input type="text" id="consultation-type" name="type" readonly required>
              </div>
              
              <div class="form-group">
                <label for="patient-message">Brief description of your concern</label>
                <textarea id="patient-message" name="message" rows="3" placeholder="Please describe your symptoms or reason for consultation..."></textarea>
              </div>
              
              <div class="booking-summary">
                <h5>Booking Summary</h5>
                <p><strong>Service:</strong> <span id="summary-service"></span></p>
                <p><strong>Price:</strong> <span id="summary-price"></span></p>
                <p><strong>Date:</strong> <span id="summary-date"></span></p>
                <p><strong>Time:</strong> <span id="summary-time"></span></p>
                <p><strong>Duration:</strong> 1 hour</p>
              </div>
              
              <div class="form-actions">
                <button type="button" id="cancel-booking" class="button ghost">Cancel</button>
                <button type="submit" class="button primary">Confirm Booking</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

    

    <section id="instagram-live" class="section live-section">
      <div class="container">
        <h2>Free Live Consultations</h2>
        <div class="live-card">
          <div class="live-schedule">
            <div class="live-icon">üì±</div>
            <div class="live-details">
              <h3>Instagram Live Sessions</h3>
              <p class="live-time">Every Friday at 6:00 PM Bali Time</p>
              <p class="live-description">Join Dr Jeevan for free live consultations on Instagram. Ask questions about neurology, Ayurveda, and osteopathy in real-time.</p>
              <div class="live-cta">
                <a href="https://www.instagram.com/ayurvedadrjeevan/" target="_blank" rel="noopener" class="button primary">
                  Follow on Instagram
                </a>
                <p class="live-note">Turn on notifications to get notified when we go live!</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="about" class="section">
      <div class="container narrow">
        <h2>About Dr Jeevan</h2>
        <p>Dr Jeevan integrates conventional neurology with Ayurvedic medicine and osteopathic principles to deliver whole‚Äëperson care. Plans are collaborative and tailored to your goals.</p>
        <div class="cards" style="margin-top:18px; grid-template-columns: 1fr 1fr; gap:16px">
          <div class="card">
            <h3 style="margin-top:0">Clinical Neurology</h3>
            <ul>
              <li>Assessment of headaches, migraines, neuropathies, dizziness/balance, sleep issues</li>
              <li>Clear explanations and step‚Äëby‚Äëstep management plans</li>
              <li>Nervous system regulation and lifestyle guidance</li>
            </ul>
          </div>
          <div class="card">
            <h3 style="margin-top:0">Osteopathic Manual Therapy</h3>
            <ul>
              <li>Gentle, hands‚Äëon techniques to restore motion and reduce tension</li>
              <li>Posture and movement coaching for lasting results</li>
            </ul>
          </div>
          <div class="card">
            <h3 style="margin-top:0">Ayurvedic Medicine</h3>
            <ul>
              <li>Constitutional assessment ‚Ä¢ diet ‚Ä¢ daily routines ‚Ä¢ herbs</li>
              <li>Traditional therapies when indicated (e.g., Abhyanga, Panchakarma)</li>
            </ul>
          </div>
          <div class="card">
            <h3 style="margin-top:0">Integrated Care</h3>
            <ul>
              <li>Combines neurology, manual therapy, and Ayurvedic lifestyle</li>
              <li>Focus on pain reduction, mobility, sleep, energy</li>
            </ul>
          </div>
        </div>
        <ul class="badges" style="margin-top:12px">
          <li class="badge" tabindex="0" data-tooltip="Emergency care background. Skilled in rapid assessment, stabilization, and triage for acute neurological and medical conditions.">ER doctor in hospitals ‚Äî 5 years</li>
          <li class="badge" tabindex="0" data-tooltip="Ayurvedic constitutional assessment (prakriti), diet and herb protocols, daily routines, and program design including Panchakarma.">Ayurvedic practitioner ‚Äî 8 years</li>
          <li class="badge" tabindex="0" data-tooltip="Diagnosis and management of headaches/migraines, neuropathies, dizziness & balance, and sleep; integrates modern testing with conservative, whole‚Äëperson treatment.">Neurologist</li>
          <li class="badge" tabindex="0" data-tooltip="Gentle hands‚Äëon techniques to restore motion and reduce pain; structural and cranial approaches; posture, movement coaching, and tailored home programs.">Osteopath ‚Äî 20 years treating patients</li>
        </ul>
      </div>
    </section>

    

    
    <section id="instagram" class="section">
      <div class="container">
        <h2>From Instagram</h2>
        <div id="ig-grid" class="ig-grid"></div>
        <div class="muted" style="margin-top:12px">Follow <a href="https://www.instagram.com/ayurvedadrjeevan/" target="_blank" rel="noopener">@ayurvedadrjeevan</a> for updates.</div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div>
        <strong>Dr Jeevan</strong>
        <div class="muted">Neurologist ‚Ä¢ Ayurvedic Doctor ‚Ä¢ Osteopath</div>
        <div id="version-badge" class="muted version-badge"></div>
      </div>
      <div class="footer-cta">
        <a id="ig-footer" class="button small" href="https://ig.me/m/ayurvedadrjeevan" target="_blank" rel="noopener">Message on Instagram</a>
      </div>
    </div>
  </footer>

  <a class="button primary float-cta" href="https://ig.me/m/ayurvedadrjeevan" target="_blank" rel="noopener">Message on Instagram</a>

  <!-- Treatment Detail Modal -->
  <div id="treatment-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modal-title"></h3>
        <button id="modal-close" class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-concept">
          <h4>Treatment Concept</h4>
          <p id="modal-concept"></p>
        </div>
        
        <div class="modal-description">
          <h4>Detailed Description</h4>
          <p id="modal-detailed-description"></p>
        </div>
        
        <div class="modal-benefits">
          <h4>Benefits</h4>
          <ul id="modal-benefits-list"></ul>
        </div>
        
        <div class="modal-details">
          <div class="modal-detail-item">
            <strong>Duration:</strong> <span id="modal-duration"></span>
          </div>
          <div class="modal-detail-item">
            <strong>Price:</strong> <span id="modal-price"></span>
          </div>
          <div class="modal-detail-item">
            <strong>Includes:</strong> <span id="modal-includes"></span>
          </div>
        </div>
        
        <div class="modal-actions">
          <button id="modal-book-btn" class="button primary">Book This Treatment</button>
          <button id="modal-close-btn" class="button ghost">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function () {
      var username = 'ayurvedadrjeevan';
      function tryOpenInstagramApp(event) {
        var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        if (!isMobile) return; // use web on desktop
        event.preventDefault();
        var appUrl = 'instagram://user?username=' + username;
        var webUrl = 'https://ig.me/m/' + username;
        var now = Date.now();
        var timeout = setTimeout(function () {
          if (Date.now() - now < 1600) {
            window.location.href = webUrl;
          }
        }, 1200);
        window.location.href = appUrl;
        // Fallback in case browsers block custom schemes
        setTimeout(function () {
          try { window.open(webUrl, '_blank'); } catch (e) { window.location.href = webUrl; }
          clearTimeout(timeout);
        }, 1500);
      }
      ['ig-cta', 'ig-top', 'ig-footer'].forEach(function (id) {
        var el = document.getElementById(id);
        if (el) el.addEventListener('click', tryOpenInstagramApp);
      });
    })();
  </script>
  <script async src="https://www.instagram.com/embed.js"></script>
  <script>
    (function(){
      fetch('version.json', { cache: 'no-cache' })
        .then(function(r){ return r.ok ? r.json() : null; })
        .then(function(v){
          if(!v) return;
          var el = document.getElementById('version-badge');
          if (el) el.textContent = 'Build ' + v.build + ' ‚Ä¢ ' + v.commit;
        })
        .catch(function(){});
    })();
  </script>
  <script>
    (function () {
      var grid = document.getElementById('ig-grid');
      if (!grid) return;
      fetch('instagram.json', { cache: 'no-cache' })
        .then(function (r) { return r.ok ? r.json() : []; })
        .then(function (posts) {
          if (!Array.isArray(posts) || posts.length === 0) return;
          posts.forEach(function (url) {
            if (!url || typeof url !== 'string') return;
            var block = document.createElement('blockquote');
            block.className = 'instagram-media';
            block.setAttribute('data-instgrm-permalink', url);
            block.setAttribute('data-instgrm-version', '14');
            block.style.background = 'transparent';
            block.style.border = '0';
            block.style.margin = '0';
            grid.appendChild(block);
          });
          if (window.instgrm && window.instgrm.Embeds) {
            window.instgrm.Embeds.process();
          }
        })
        .catch(function () { /* no-op */ });
    })();
  </script>
  <script>
    (function () {
      var grid = document.getElementById('treatments-grid');
      if (!grid) return;
      fetch('treatments.json', { cache: 'no-cache' })
        .then(function (r) { return r.ok ? r.json() : []; })
        .then(function (items) {
          if (!Array.isArray(items) || items.length === 0) return;
          items.forEach(function (t) {
            var card = document.createElement('div');
            card.className = 'treat-card';
            card.style.cursor = 'pointer';
            card.setAttribute('data-treatment', JSON.stringify(t));
            var media;
            if (t.instagram) {
              media = document.createElement('blockquote');
              media.className = 'instagram-media';
              media.setAttribute('data-instgrm-permalink', t.instagram);
              media.setAttribute('data-instgrm-version', '14');
              card.appendChild(media);
            } else if (t.image) {
              media = document.createElement('img');
              media.className = 'treat-image';
              media.loading = 'lazy';
              media.alt = t.title || 'Treatment image';
              media.src = t.image;
              media.onerror = function () {
                this.onerror = null;
                this.src = 'https://source.unsplash.com/1600x1200/?ayurveda,nature';
              };
              card.appendChild(media);
            }
            var body = document.createElement('div');
            body.className = 'treat-body';
            var title = document.createElement('h3');
            title.className = 'treat-title';
            title.textContent = t.title || '';
            var desc = document.createElement('p');
            desc.className = 'treat-desc';
            desc.textContent = t.description || '';
            var categoryPrice = document.createElement('div');
            categoryPrice.style.marginBottom = '8px';
            
            if (t.category) {
              var category = document.createElement('span');
              category.className = 'treat-category';
              category.textContent = t.category;
              categoryPrice.appendChild(category);
            }
            
            if (t.price) {
              var price = document.createElement('span');
              price.className = 'treat-price';
              price.textContent = t.price;
              categoryPrice.appendChild(price);
            }
            
            body.appendChild(title);
            body.appendChild(desc);
            if (t.category || t.price) body.appendChild(categoryPrice);
            
            // Add booking button
            var bookButton = document.createElement('button');
            bookButton.className = 'button primary book-treatment-btn';
            bookButton.textContent = 'Book This Treatment';
            bookButton.setAttribute('data-treatment-title', t.title || '');
            bookButton.setAttribute('data-treatment-price', t.price || '');
            bookButton.setAttribute('data-treatment-category', t.category || '');
            bookButton.style.marginTop = '12px';
            bookButton.style.width = '100%';
            body.appendChild(bookButton);
            
            card.appendChild(body);
            grid.appendChild(card);
          });
          if (window.instgrm && window.instgrm.Embeds) {
            window.instgrm.Embeds.process();
          }
        })
        .catch(function () { /* no-op */ });
    })();
  </script>

  <script>
    // Treatment Modal JavaScript
    (function() {
      let currentTreatmentData = null;
      
      // Handle treatment card clicks
      document.addEventListener('click', function(e) {
        const treatCard = e.target.closest('.treat-card');
        if (treatCard && !e.target.classList.contains('book-treatment-btn')) {
          const treatmentData = JSON.parse(treatCard.getAttribute('data-treatment'));
          showTreatmentModal(treatmentData);
        }
      });
      
      function showTreatmentModal(treatment) {
        currentTreatmentData = treatment;
        
        // Populate modal content
        document.getElementById('modal-title').textContent = treatment.title;
        document.getElementById('modal-concept').textContent = treatment.concept || 'Holistic Treatment Approach';
        document.getElementById('modal-detailed-description').textContent = treatment.detailedDescription || treatment.description;
        document.getElementById('modal-duration').textContent = treatment.duration || '60 minutes';
        document.getElementById('modal-price').textContent = treatment.price;
        document.getElementById('modal-includes').textContent = treatment.includes || 'Consultation and treatment';
        
        // Populate benefits list
        const benefitsList = document.getElementById('modal-benefits-list');
        benefitsList.innerHTML = '';
        if (treatment.benefits && Array.isArray(treatment.benefits)) {
          treatment.benefits.forEach(function(benefit) {
            const li = document.createElement('li');
            li.textContent = benefit;
            benefitsList.appendChild(li);
          });
        }
        
        // Set up book button
        const bookBtn = document.getElementById('modal-book-btn');
        bookBtn.onclick = function() {
          closeModal();
          // Trigger booking flow
          if (window.bookConsultation) {
            window.bookConsultation(treatment.title, treatment.price);
          }
        };
        
        // Show modal
        document.getElementById('treatment-modal').style.display = 'flex';
        document.body.style.overflow = 'hidden';
      }
      
      function closeModal() {
        document.getElementById('treatment-modal').style.display = 'none';
        document.body.style.overflow = 'auto';
        currentTreatmentData = null;
      }
      
      // Close modal handlers
      document.getElementById('modal-close').addEventListener('click', closeModal);
      document.getElementById('modal-close-btn').addEventListener('click', closeModal);
      
      // Close modal when clicking overlay
      document.getElementById('treatment-modal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeModal();
        }
      });
      
      // Close modal with Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && document.getElementById('treatment-modal').style.display === 'flex') {
          closeModal();
        }
      });
    })();
  </script>

  <script>
    // Booking System JavaScript
    (function() {
      let currentDate = new Date();
      currentDate.setDate(1); // Set to first day of current month
      let selectedDate = null;
      let selectedTime = null;
      let selectedService = null;
      let selectedPrice = null;
      
      // Available time slots (4 per day, 1 hour each)
      const timeSlots = [
        '09:00 AM',
        '11:00 AM', 
        '02:00 PM',
        '04:00 PM'
      ];
      
      // Booked slots (in real implementation, this would come from a database)
      const bookedSlots = {};
      
      function initCalendar() {
        updateCalendarDisplay();
        
        document.getElementById('prev-month').addEventListener('click', function() {
          const today = new Date();
          const prevMonth = new Date(currentDate);
          prevMonth.setMonth(prevMonth.getMonth() - 1);
          
          // Don't allow navigation to months before current month
          if (prevMonth.getFullYear() > today.getFullYear() || 
              (prevMonth.getFullYear() === today.getFullYear() && prevMonth.getMonth() >= today.getMonth())) {
            currentDate.setMonth(currentDate.getMonth() - 1);
            updateCalendarDisplay();
          }
        });
        
        document.getElementById('next-month').addEventListener('click', function() {
          currentDate.setMonth(currentDate.getMonth() + 1);
          updateCalendarDisplay();
        });
      }

      // Populate phone country codes with all countries
      function populateCountryCodes() {
        var select = document.getElementById('phone-country');
        if (!select) return;
        var defaultCode = select.value || '+62';
        fetch('https://restcountries.com/v3.1/all?fields=cca2,idd,name', { cache: 'no-cache' })
          .then(function(r){ return r.ok ? r.json() : []; })
          .then(function(list){
            if (!Array.isArray(list) || list.length === 0) return;
            // Build [{label, dial}] options
            var options = [];
            list.forEach(function(c){
              if (!c || !c.idd || !c.idd.root) return;
              var root = c.idd.root || '';
              var suffixes = Array.isArray(c.idd.suffixes) && c.idd.suffixes.length ? c.idd.suffixes : [''];
              var name = (c.name && c.name.common) ? c.name.common : (c.cca2 || '');
              suffixes.forEach(function(suf){
                var dial = (root + (suf || '')).replace(/\s+/g,'');
                if (!dial) return;
                options.push({ label: name + ' (' + dial + ')', dial: dial });
              });
            });
            // Sort by country name (label)
            options.sort(function(a,b){ return a.label.localeCompare(b.label); });
            // Preserve current selection if possible
            var current = defaultCode;
            // Rebuild select
            select.innerHTML = '';
            // Add a few common options at top if present
            var preferred = ['+62','+61','+65','+60','+91','+44','+1','+971'];
            preferred.forEach(function(code){
              var found = options.find(function(o){ return o.dial === code; });
              if (found) {
                var opt = document.createElement('option');
                opt.value = found.dial;
                opt.textContent = found.dial + ' ' + found.label.replace(' ('+found.dial+')','');
                select.appendChild(opt);
              }
            });
            // Add a separator (disabled option)
            var sep = document.createElement('option');
            sep.disabled = true; sep.textContent = '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ';
            select.appendChild(sep);
            // Add all options
            options.forEach(function(o){
              var opt = document.createElement('option');
              opt.value = o.dial;
              opt.textContent = o.dial + ' ' + o.label.replace(' ('+o.dial+')','');
              select.appendChild(opt);
            });
            // Restore selection
            select.value = current;
            if (!select.value) select.value = '+62';
          })
          .catch(function(){ /* ignore */ });
      }
      
      function updateCalendarDisplay() {
        const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
          'July', 'August', 'September', 'October', 'November', 'December'];
        
        document.getElementById('calendar-month-year').textContent = 
          monthNames[currentDate.getMonth()] + ' ' + currentDate.getFullYear();
        
        const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
        const startDate = new Date(firstDay);
        startDate.setDate(startDate.getDate() - firstDay.getDay());
        
        const calendarDays = document.getElementById('calendar-days');
        calendarDays.innerHTML = '';
        
        const today = new Date();
        today.setHours(0, 0, 0, 0); // Reset time for accurate comparison
        
        for (let i = 0; i < 42; i++) {
          const cellDate = new Date(startDate);
          cellDate.setDate(startDate.getDate() + i);
          cellDate.setHours(0, 0, 0, 0); // Reset time for accurate comparison
          
          const dayElement = document.createElement('div');
          dayElement.className = 'calendar-day';
          dayElement.textContent = cellDate.getDate();
          
          // Add different styling for dates not in current month
          if (cellDate.getMonth() !== currentDate.getMonth()) {
            dayElement.classList.add('other-month');
          }
          
          // Disable past dates
          if (cellDate < today) {
            dayElement.classList.add('disabled');
          } else if (cellDate.getMonth() === currentDate.getMonth()) {
            // Only make current month dates clickable
            dayElement.addEventListener('click', function(e) {
              e.preventDefault();
              selectDate(new Date(cellDate));
            });
            dayElement.style.cursor = 'pointer';
          }
          
          calendarDays.appendChild(dayElement);
        }
      }
      
      function selectDate(date) {
        selectedDate = date;
        
        // Update selected date styling
        document.querySelectorAll('.calendar-day').forEach(day => {
          day.classList.remove('selected');
        });
        
        // Find and highlight the clicked date
        const dayElements = document.querySelectorAll('.calendar-day');
        dayElements.forEach(dayEl => {
          const dayNum = parseInt(dayEl.textContent);
          if (dayNum === date.getDate() && !dayEl.classList.contains('other-month') && !dayEl.classList.contains('disabled')) {
            dayEl.classList.add('selected');
          }
        });
        
        // Update time slots
        updateTimeSlots();
        
        // Update selected date display
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.querySelector('.selected-date').textContent = 
          'Available slots for ' + date.toLocaleDateString('en-US', options);
      }
      
      function updateTimeSlots() {
        const timeSlotsContainer = document.getElementById('time-slots');
        timeSlotsContainer.innerHTML = '';
        
        const dateKey = selectedDate.toISOString().split('T')[0];
        const bookedForDate = bookedSlots[dateKey] || [];
        
        timeSlots.forEach(time => {
          const slotElement = document.createElement('button');
          slotElement.className = 'time-slot';
          slotElement.textContent = time;
          
          if (bookedForDate.includes(time)) {
            slotElement.classList.add('booked');
            slotElement.disabled = true;
          } else {
            slotElement.addEventListener('click', function() {
              selectTimeSlot(time, slotElement);
            });
          }
          
          timeSlotsContainer.appendChild(slotElement);
        });
      }
      
      function selectTimeSlot(time, element) {
        selectedTime = time;
        
        // Update selected time styling
        document.querySelectorAll('.time-slot').forEach(slot => {
          slot.classList.remove('selected');
        });
        element.classList.add('selected');
        
        // Show booking form if service is selected
        if (selectedService) {
          showBookingForm();
        }
      }
      
      function showBookingForm() {
        document.getElementById('booking-form-container').style.display = 'block';
        document.getElementById('consultation-type').value = selectedService;
        document.getElementById('summary-service').textContent = selectedService;
        document.getElementById('summary-price').textContent = selectedPrice;
        document.getElementById('summary-date').textContent = selectedDate.toLocaleDateString('en-US', { 
          weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' 
        });
        document.getElementById('summary-time').textContent = selectedTime;
        
        // Scroll to form
        document.getElementById('booking-form-container').scrollIntoView({ behavior: 'smooth' });
      }
      
      // Handle treatment booking buttons
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('book-treatment-btn')) {
          selectedService = e.target.getAttribute('data-treatment-title');
          selectedPrice = e.target.getAttribute('data-treatment-price');
          
          // Scroll to booking section
          document.getElementById('booking').scrollIntoView({ behavior: 'smooth' });
          
          // Show time slots if date is selected
          if (selectedDate && selectedTime) {
            showBookingForm();
          }
        }
      });
      
      // Handle consultation booking (general booking button)
      function bookConsultation(type, price) {
        selectedService = type;
        selectedPrice = price;
        
        document.getElementById('booking').scrollIntoView({ behavior: 'smooth' });
        
        if (selectedDate && selectedTime) {
          showBookingForm();
        }
      }
      
      // Handle form submission
      document.getElementById('booking-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const formData = new FormData(e.target);
        const countryCodeEl = document.getElementById('phone-country');
        const fullPhone = (countryCodeEl ? countryCodeEl.value : '').trim() + ' ' + (formData.get('phone') || '').trim();
        const bookingData = {
          name: formData.get('name'),
          email: formData.get('email'),
          phone: fullPhone,
          service: selectedService,
          price: selectedPrice,
          date: selectedDate.toLocaleDateString('en-US', { 
            weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' 
          }),
          time: selectedTime,
          message: formData.get('message')
        };
        
        // Send booking to Instagram (this would be handled by a backend service)
        sendBookingToInstagram(bookingData);
      });
      
      // Cancel booking
      document.getElementById('cancel-booking').addEventListener('click', function() {
        document.getElementById('booking-form-container').style.display = 'none';
        document.getElementById('booking-form').reset();
      });
      
      function sendBookingToInstagram(bookingData) {
        // Create Instagram message
        const message = `üè• NEW BOOKING REQUEST\n\n` +
          `üë§ Name: ${bookingData.name}\n` +
          `üìß Email: ${bookingData.email}\n` +
          `üì± Phone: ${bookingData.phone || 'Not provided'}\n\n` +
          `ü©∫ Service: ${bookingData.service}\n` +
          `üí∞ Price: ${bookingData.price}\n` +
          `üìÖ Date: ${bookingData.date}\n` +
          `‚è∞ Time: ${bookingData.time}\n\n` +
          `üìù Message: ${bookingData.message || 'No additional message'}\n\n` +
          `Please confirm this appointment.`;

        // Instagram does not allow prefilled or auto-sent DMs from websites.
        // Copy the message to clipboard, then open the DM so the user can paste & send.
        try {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(message).catch(function(){});
          }
        } catch (e) { /* ignore */ }

        alert('Booking details copied. Instagram will open ‚Äî paste the message in the chat and send.');

        const instagramUrl = `https://ig.me/m/ayurvedadrjeevan`;
        window.open(instagramUrl, '_blank');
        
        // Mark slot as booked (in real implementation, this would be saved to database)
        const dateKey = selectedDate.toISOString().split('T')[0];
        if (!bookedSlots[dateKey]) {
          bookedSlots[dateKey] = [];
        }
        bookedSlots[dateKey].push(selectedTime);
        
        // Reset form and hide
        document.getElementById('booking-form-container').style.display = 'none';
        document.getElementById('booking-form').reset();
        
        // Update time slots display
        updateTimeSlots();
      }
      
      // Make functions globally available
      window.bookConsultation = bookConsultation;
      
      // Initialize calendar when page loads
      document.addEventListener('DOMContentLoaded', function(){
        initCalendar();
        populateCountryCodes();
      });
    })();
  </script>
  
</body>
</html>


